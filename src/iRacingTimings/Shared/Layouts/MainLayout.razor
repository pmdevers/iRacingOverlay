@using ElectronNET.API
@inherits LayoutComponentBase

<AppBar AppIcon="/img/stopwatch.svg"
        OnClose="@_window.Close"
        OnRestore="@_window.Restore"
        IsMaximized="@_ismaximized"
        OnMinimize="@_window.Minimize"
        OnMaximize="@_window.Maximize">

    <NavMenu></NavMenu>
</AppBar>
 
@Body

@code
{
    private BrowserWindow _window;
    private bool _ismaximized;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await base.OnAfterRenderAsync(firstRender);
        if (!firstRender)
        {
            _ismaximized = await _window.IsMaximizedAsync();
        }
    }

    public MainLayout()
    {
        _window = Electron.WindowManager.BrowserWindows.First();
    }

    private void Maximize(MouseEventArgs args)
    {
        Electron.WindowManager.BrowserWindows.First().Maximize();
        
    }
    private void Minimize(MouseEventArgs args)
    {
        Electron.WindowManager.BrowserWindows.First().Minimize();
    }

	private void Close(MouseEventArgs args)
	{
		Electron.App.Exit();
	}
}
